---
apiVersion: v1
kind: Service
metadata:
  name: quarantine-webhook
  namespace: dev
spec:
  selector:
    app: incident-operator
    component: incident-validation-webhook
  ports:
  - name: webhook
    port: 443
    targetPort: 9443

---
apiVersion: v1
kind: Secret
metadata:
  name: incident-webhook
  namespace: dev
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURRakNDQWlxZ0F3SUJBZ0lVWlJmUE9kbjErdnRIWmdrd2lmS2dCL0tBbzI0d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0x6RXRNQ3NHQTFVRUF3d2tRV1J0YVhOemFXOXVJRU52Ym5SeWIyeHNaWElnVjJWaWFHOXZheUJFWlcxdgpJRU5CTUI0WERUSXhNRGt4T1RFMk1EWTFORm9YRFRJeE1UQXhPVEUyTURZMU5Gb3dKVEVqTUNFR0ExVUVBd3dhCmNYVmhjbUZ1ZEdsdVpTMTNaV0pvYjI5ckxtUmxkaTV6ZG1Nd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDZ2lxbHAwdXpvV0ZOd1M3dnkzc0YycjZyeWFZSk5CRnJDVm05MVdZd1o3Wi9qZU9CQwprWU1ZQ2l0REdpYXhjdzlvbmRRbHlZNldHTVdTbm53Y2RkM1dRZGtVVExwTGg3YmxmTDFsRGZ2SDZhR0lWRzdmCmY1aDNoUFFJbUM4b2tFKzNoYTJrd0VhT21FaVpxSXo4Y2EwWWtsNmUwK2xOUXl5cjl0OXE2eFIrbGVQZFN4QkoKNkZrWXg5TjJmSWtKZGEwM3dsVEFQeWxvblNETTQzT3NzN0V4WFN2Q0tSOGpsd2w4ZWJtK21TYWJFMnhKWEliVgpCRVlwTmdyTzZ5aGpUazArc0xlMTlkNE1MTXdBR3NUajBqTXRldm1vZE5kZTdkaElpZk4zVEl6VXM5RW1RZUVCClhDV1ViSjdST3FBa0tja0N4MGdPR0dObjFtYlhuTkNUM3NQdEFnTUJBQUdqWURCZU1Ba0dBMVVkRXdRQ01BQXcKQ3dZRFZSMFBCQVFEQWdYZ01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFsQmdOVgpIUkVFSGpBY2docHhkV0Z5WVc1MGFXNWxMWGRsWW1odmIyc3VaR1YyTG5OMll6QU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBaythd2Vqc1hIMkZ5cXB1NGMwaEZUOHZNMEloRnkxd0dLTUxJTjVxb0FRNzJrbEdCSzZLQVY1QWQKUzBRZkU4alZ0cGhOWGx6ZE1vUTRnenR3dFR3elRsenNidU9TRU1lcXZhREJYRUtRTWJEZzcwSnJNd21zbkVBNgpOTlRha1d1Rzh4MXN2dmVXeTZnc09wS2RoVSswZE4rOWtDOUlSTjVvTDVzbWhZRVEwY0l0SzBTLzVIblRHdUc0CnNHKy9uM1RiVWhnV3ppaFEwSm9mK3JVVUZuWkpJQUJHdVhNN2kwdTYwMkhRNFhhMkpkZTE2dXFSY0NjS2hrZ2IKV241aG8zVVRPRXRFSVpmRUpmYk9DY3RwSkFUU3VNSFVMQUplck81WFFsY0tRcWtVR1pTNUtLSUNRUzdDWk5ITApBWjFVenRuWFFacmtWVFFESmp2OTdUYndOZkR5ekE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBb0lxcGFkTHM2RmhUY0V1Nzh0N0JkcStxOG1tQ1RRUmF3bFp2ZFZtTUdlMmY0M2pnClFwR0RHQW9yUXhvbXNYTVBhSjNVSmNtT2xoakZrcDU4SEhYZDFrSFpGRXk2UzRlMjVYeTlaUTM3eCttaGlGUnUKMzMrWWQ0VDBDSmd2S0pCUHQ0V3RwTUJHanBoSW1haU0vSEd0R0pKZW50UHBUVU1zcS9iZmF1c1VmcFhqM1VzUQpTZWhaR01mVGRueUpDWFd0TjhKVXdEOHBhSjBnek9OenJMT3hNVjByd2lrZkk1Y0pmSG01dnBrbW14TnNTVnlHCjFRUkdLVFlLenVzb1kwNU5QckMzdGZYZURDek1BQnJFNDlJekxYcjVxSFRYWHUzWVNJbnpkMHlNMUxQUkprSGgKQVZ3bGxHeWUwVHFnSkNuSkFzZElEaGhqWjlabTE1elFrOTdEN1FJREFRQUJBb0lCQUhwckFlQldISnpYclZoMgpCNjJkT3J6OEcwaWFOK2Z1cUI2RXRwMHZXV3YwRFBYeUdGL3FnYUoxTHFRT2J1N2xKQnpNTFJkYmFNVC93cmlZCjdWN3VhZWlWY2FqUEVVZkRCeTViUGppdXZ3MmtFNjdYWTJ3OTZjOUpyS1JaRjZ6QXptak5JS24rakU3enhIaVgKVkZxemZDQytqRFJrdHdSWmN0ajJlVXNZVXhwcWtINCtJeGNxeWNDaE8xeTMvUHdaay9FYzNwYUZnUFJqVkdVZApESVJJbVRSdnhTNjZaVDV5K1p3R1lyRkJhaVRrV1ZOSWo3eE9OM2Y5ZzRKeU43WkVmL2FydmRVNDVIZjBJZG9JCi93aUtKRTNybHJ1UER6MG9MdVdBUEJPUDFxL0c5RkpOaHZTR2Y4RTczYXllOFF6Q3E1TzlaVjBBT3k3UnZKb2gKcm5QZnFta0NnWUVBeit6SkV1RjR3R1BEQjFpU0JhK2w0K1JYUTlUTU9xMjdZZlN0YnI2U09BZkxXVjByWkdBZgpZdHUyMDNhYWk0Ym1OV1AxUVgxTUxmMUFscXFFN1VpenBib0YxVUE0RFhZMFdSVlVGd1kybDNEVkhBbkZyeGJSCkovQ3pvQXZhWU0wSk9IRW9xSUg4QytsZXRqR1ZwdlRyYlpRaFMyMTdpSFVEdThXaDBraWhiNzhDZ1lFQXhhazYKVVNXR09VWmRPWXdtSEpiNU1BVi9sQ3BkYzJXMkFSRnZHNjJoZGVZcEhkYXFTcStDSkUxaWh6OVdNamRnaFp6agpOcS80L1U2eUY5emJqSitlUFRKTDdhY3p3cldWb2pxcU1SSFh2bjBkLzhMOEJpSUYzS3FBUHkwTmFHMlpWOGE5CjR5eVlqNUtocEVPb29mVVZFUmNMdk41aVJZUFozNmtCWDRqYXQxTUNnWUE4NFRMYXNXUCt5UGNRenBFcTB3dzYKbHVBcVAwTnhKdTlIdGpHVnpIelpwUWFZYXR4S3JvNWlEcjBRVzVqU283UUNDL3VDcW1KRTBQTTVha0l6aStiMQo3bXJJenQzYXF6S1dwdFVSVE1OdFFoOVQ3MVNQZUpuVEhQb3JNVzFHaktKWGdXS0xQRXdGWE5aYmVGYytKRlpPCnBtRzlTUmd6a3pkOW9sZElUL1hjMXdLQmdGUzU0V0YvTURYRXo1a25WZjdUU0NVcGRqSlFwcFljZHhPbUlYWS8KeXdINmtvMVR3dE1Zd0RSSFo0Q0p5YXpreDk3K0RQY1lIeWFWWVFtUmhocVZJUU1pV0NHYWxqbFVGTHZoWWFwKwo5M2VUc2hRN3hFUHN1WTZKRjBmOVM4NERqTU52VVYzYmM5bTNCTXFncGR3bWJjMVJqNXA1eUszN2dweTRtUG9XCmM0bzVBb0dBYjVmUHJLQWlLUmhUbHA4NnY2QmROMHB0VTFvbjBpM0dEMXhNdUExUC9SSDVsM01mNzJhR29hOFUKOGtzVXJjNHI5dHlFUE11bjQ1QXVxbTV3eGlBTTVreFdKdlBzUlRETG44V3VGLytwNTY5SjZyeXpWVk5WUmM5MwpoR1JwQUQwVW5IeG9GTWZ2aVpZczZsUkVCYVZ2VEV0OFN3V2N2OUNFTjhpMGRRblBTeDA9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
type: kubernetes.io/tls

---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: quarantine
webhooks:
  - name: quarantine.webhook.svc
    sideEffects: None
    admissionReviewVersions:
    - "v1"
    - "v1beta1"
    clientConfig:
      service:
        name: quarantine-webhook
        namespace: dev
        path: "/validate"
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lVS0RQYzE5YnNyaWd2MTE4RXk4SkhXUW8vYnNNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0x6RXRNQ3NHQTFVRUF3d2tRV1J0YVhOemFXOXVJRU52Ym5SeWIyeHNaWElnVjJWaWFHOXZheUJFWlcxdgpJRU5CTUI0WERUSXhNRGt4T1RFMk1qUXdPVm9YRFRJeE1UQXhPVEUyTWpRd09Wb3dMekV0TUNzR0ExVUVBd3drClFXUnRhWE56YVc5dUlFTnZiblJ5YjJ4c1pYSWdWMlZpYUc5dmF5QkVaVzF2SUVOQk1JSUJJakFOQmdrcWhraUcKOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXB4WWQ2MlVXZmlLQ3lKbjBNZ3NYUFc4VVRuZWRkZGljaWJSbAowVFBLbVN3dzExNXFmeXdZZ0g1K0RlcjZnYkdiYVFtc21SbmdjOENYZmhPUUlMbGtwQytZMUJLOXpLL2dobWdGCldCSnNsNXVUSVJVYVVEM2ozL0xCRWhFeURCNzh3RDgvVzVVMTRnd2Jvbi9rVDliMlNkZWYzcmw2ci81K1NQODQKLzN2VkZKN0Q0QWpaRFRLSzF6cjVTRGRJZDdGK0FaenZsUXBxekxrZXZGaHhZN2xIRzMvUFhBa3dRNFlUYlJiNAovWjIySGZkVitUM0lPczB5d2RIVzBURDNVOER6L0xERUgxem5aOHZVUjJjWS9GaG9IZzBsWVdTUWkyaGxEK0pVCk5YZmhlb1l1cWpndnBLRTl0Ny9mQ05Na1QxRjZFbFRjVDcxWVU5VHE2aUg2REZ5N1dRSURBUUFCbzFNd1VUQWQKQmdOVkhRNEVGZ1FVS21iMUgxbHlvSm55OVRRbEh4WUQ4RGN5RkRZd0h3WURWUjBqQkJnd0ZvQVVLbWIxSDFseQpvSm55OVRRbEh4WUQ4RGN5RkRZd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFVdDJ1czJnTzFkWGpKMnlCM0JhN215c3RTNFBLRStuNWs2SUd2RFRkdnRFMHhMK0dxa2ZkTExtZ2R3R2IKT3VSMW9nTEdFSEtXK1hqV3lZOHlqTkxURGloK3BDeFgxeG85a2wwbGZtMThYREtPVXhSclRxemR3UGFLVFIrTAoxN0t4cUVyQzd6NjA0RTNHZy9sK2VrMGxzZ0QrNkJ0N1BYcW9oSkRHQnFEd1JPdkJIQnZPWUdHRTBFOFhaOWFMCitLZks0V2dIZnFVK3VSSSt1cXY2NVdLU1hHYmUrOTlxY1diQVE0ZEF4bm12Q0VPTEorWEt4dFFuOXhSekpVb0QKNzN6UEdiMUlxZTlxS2JXU0N3QmhuWFZNTzlMRmhrYzFtNU5PaGhDUmRaRStUdnY5TlJBVkg4QmRYeTEvTm1TcgpUNmV2bzE4MGkwMTFhb29ZWkEyeHZkbGEzUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"
    rules:
      - operations: ["CREATE"]
        apiGroups: ["ops.soer3n.info"]
        apiVersions: ["v1alpha1"]
        resources: ["quarantines"]
