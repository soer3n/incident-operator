---
apiVersion: v1
kind: Service
metadata:
  name: quarantine-webhook
  namespace: dev
spec:
  selector:
    app: incident-operator
    component: incident-validation-webhook
  ports:
  - name: webhook
    port: 443
    targetPort: 9443

---
apiVersion: v1
kind: Secret
metadata:
  name: incident-webhook
  namespace: dev
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURRakNDQWlxZ0F3SUJBZ0lVV0ozVFNIa0lwTGg1SUNMN1JrZDlEQUYvOEljd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0x6RXRNQ3NHQTFVRUF3d2tRV1J0YVhOemFXOXVJRU52Ym5SeWIyeHNaWElnVjJWaWFHOXZheUJFWlcxdgpJRU5CTUI0WERUSXhNVEF3TXpFeE1EWXlNMW9YRFRJeE1URXdNakV4TURZeU0xb3dKVEVqTUNFR0ExVUVBd3dhCmNYVmhjbUZ1ZEdsdVpTMTNaV0pvYjI5ckxtUmxkaTV6ZG1Nd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDdnNCRGpoMHlYbHZxWCthc2ZaWk9DaEI5b0RyK3pmYVhpWTArUzY2enQrSWlWejA4dApyWk9zYmpaK21sbEZJR1VIMFZaeFU2VU1aVEhzVjZxdk9KUGMvOERjbDQ3UGhDRVVMdFFPTHl4ZFJMVW9YaGdNClJVaHRSc3FqbmNSQ0Z1aG5BNk9vYUhDNDM1TjRnZjVXc0xsTXozSy9JSmNiQmNRUEdPeVRCOVRBN2VjTmU0QnIKc1BvdHJvcDdURkhTci9hWmE0VUlGVk5qS09KUTEzU293RjJzTnV3akp0M05rNGd0YnB6VGZmK29mL25ydks3VwoxdEJSVW9mdncyTnhNV2RXWmx5R1Bta3VUY2dLdkNLY2tLREJ2VFJnenFFZTRCUWpFUEorbmhKTVFFNGRMaVNnCis2OU1OMFBjbkQxdi9KS3lub0ZjSUxIRTV6Y3FISFdhejhvZkFnTUJBQUdqWURCZU1Ba0dBMVVkRXdRQ01BQXcKQ3dZRFZSMFBCQVFEQWdYZ01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFsQmdOVgpIUkVFSGpBY2docHhkV0Z5WVc1MGFXNWxMWGRsWW1odmIyc3VaR1YyTG5OMll6QU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBaUVFcExBK2VtUzhNU05sRU5CQjcwN3ZFaC90SjFUL0lBWStVQ2dlWnpITXAxWStDSmNXWGt5QkMKZ084em1pbk5hWjM3K3FDMlVTRE4zcFN1VHk0UmpJZnUwKzFTbTVKWGVoOWUwdm1CVXNEaS9xVUs5OVdPOHdqWgpIZTBtOGl3eUh0SmNENEdLZFBqS1RFanZYUzFab1I0NjR2cWxIb0Y2QnZXMThmZy9BeitGWHNrU0Evb0k4UTJOCmFsVmdXVzVKUUgxL2JEMDFhTkFYMVFLYmgybWhiUUNwZ1Ryd1UxWGxPTlJuL0Y2ZFFKcWhDd1FwRUowSFpQS08KS3pmMWFldk1udnR3WVdBSXNCSEpsZGZ4SHEvbnZZK0RLOG5pb2QwQmlFV2NMQlcvamlHTG1qclkzNk9zbktDagpqa05QQitkWEZHb0l3dFVMdElXWkppa0dwbUoyOGc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBcjdBUTQ0ZE1sNWI2bC9tckgyV1Rnb1FmYUE2L3MzMmw0bU5Qa3V1czdmaUlsYzlQCkxhMlRyRzQyZnBwWlJTQmxCOUZXY1ZPbERHVXg3RmVxcnppVDNQL0EzSmVPejRRaEZDN1VEaThzWFVTMUtGNFkKREVWSWJVYktvNTNFUWhib1p3T2pxR2h3dU4rVGVJSCtWckM1VE05eXZ5Q1hHd1hFRHhqc2t3ZlV3TzNuRFh1QQphN0Q2TGE2S2UweFIwcS8ybVd1RkNCVlRZeWppVU5kMHFNQmRyRGJzSXliZHpaT0lMVzZjMDMzL3FILzU2N3l1CjF0YlFVVktINzhOamNURm5WbVpjaGo1cExrM0lDcndpbkpDZ3diMDBZTTZoSHVBVUl4RHlmcDRTVEVCT0hTNGsKb1B1dlREZEQzSnc5Yi95U3NwNkJYQ0N4eE9jM0toeDFtcy9LSHdJREFRQUJBb0lCQUVpZ2JCcml6NUxLNHdUNApQUGxac0VVQUFVdXU3U2h5QktVMWtLdVhxWUVtZ0xBTlp4bm02MmtZbG9aM24vZW5rSnhPdVlGWHBwOGRKaW9oCmczbXoxY3hDSGFRVE13SXVDTTZqSFI1UCtmTUVlQzhiMXEwYjV2amxqdGRjWE1sRlZ3VmV4OFRTaCthazVmMm4KSDFFTzlVci9adHdEeVBOdXlzSEM5K2xBRDM5QktmL0luOFV4SFNkSXFlcFhiT3JkV01tbUd6a2thQms4RFpXaApYYkdqUWo1NGF6MlY4VHkvdUJzZGJ0Qnd0QStYL0RpTk0rSExYdEJTTkRlbnkxczJHdzM0N01XcDcwMkUyTzVpCkJMUmVqZmVKcTZrU08vU2x3ODlzWlRrSURtQ2NsT01NL0VoN0ZIbTJBd3V6N21YVjQ0TDB2NXZtRWQ0NXN0RG8KVUdBckllRUNnWUVBM2hjdmRqRnZrZ09TQnNwY0JwL0NtcHAyb0s2alpzeTg0b1ByQ3R1NExUZGNFMWpCb0htcQpqY3Q1elZKWCtoU2h4STZaWFdRWlJVemlmN2pTd2trYUNiaWFmMklEc2IwamdSM1hGMGtaUjBjbytqQnFTb29qCkQrK1VFSGlqMEdzcTFFK0NaQzY3ZUxaUDhCRHQ5Rnk0azZ5MCtqUlpTdmxLRGkyeStGTFJaR3NDZ1lFQXlvTWsKWlJ6Tm5MTGh6ZHZKdGJvNE0zTDNhb2xNdUZZZ3BKU0FsWjRBMjVYbTlxdFFwcmZ6Tm9kbUVnSitzR3I0bDdUMwpEYm1ucHhxQVpLWVo2Yy9sa01GVGFvM1BHVmQvM1VvbWNTRURsN1gvNFpFUElqNFhUemViRTZNem1lY0hJdkwxCmdCQmN2YlB0eUpLVU9TOExOay8wVUU0OWs1VUo5OXpsd1JXd3ZoMENnWUVBZ2RnMFczblRyUjZCUlk4UjlwMTQKL1VMSmtIQUtBSlE2Nm9RTjZ5OUNvc3oyL0Npc0s5SjJNS2lCOGRUdXNydFZTTUhHVUoreFZwNzQzWXVGVFNuSQpHMTdlbFJNTTdlR1MzRzVCenM5aUJCWktrdHV6aVJqeUh1TUhRZ29HWEZnTGxrMVdBcFIvN3JkSVRTYll1RUZ0CmVJbEUxZk85TU9SR3M3dHNJMXJvS1RrQ2dZRUF3Q0UxaVZ5UFVraUFaSTlPU3NSM0I1RGVYVXdQNXArSDdyMFoKVlZtSFZNMWVSODUzQVFWcWtPUmFtV0dXa29lYWZFdnJUREZFZHd4MG5ZamM4dkFUeTRjdlBkdDJqWU52UXlKVApZR2REQWs5Z2liL1hETlM5eHFGcDFuS3l4U1BqcUd1N01SblU4d0hlNmJqdk9XV0JqTERFaU9BQ0daOS95cEhmCnhKVndqcDBDZ1lFQWdpQnJLYkNBcGI5bGQyVnRHc1g5cW1jQXRNMTNoWTRVU1E1cHEveFIyY0NPNCtscllwV0gKNUFNL1JnQzNFNjlyQlZOY1BrRmM0M2o0NWtuYVVuUDZRRmhMNGRIRVVENm4zaS9VVXZoekphTFZzVzFJVEViRQo2NFV6ekhwTkxLR0h4UXRKSUVHSlZMeWl1ZFZZZTFIcFo1My9FU0lMblBVSGNMZm8vK0xnb0FjPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
type: kubernetes.io/tls

---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: quarantine
webhooks:
  - name: quarantine.webhook.svc
    sideEffects: None
    admissionReviewVersions:
    - "v1"
    - "v1beta1"
    clientConfig:
      service:
        name: quarantine-webhook
        namespace: dev
        path: "/validate"
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lVRk1WaDNkOEpwNEExZktPS0EzWnQxYUxMRG1zd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0x6RXRNQ3NHQTFVRUF3d2tRV1J0YVhOemFXOXVJRU52Ym5SeWIyeHNaWElnVjJWaWFHOXZheUJFWlcxdgpJRU5CTUI0WERUSXhNVEF3TXpFeE1EWXlNMW9YRFRJeE1URXdNakV4TURZeU0xb3dMekV0TUNzR0ExVUVBd3drClFXUnRhWE56YVc5dUlFTnZiblJ5YjJ4c1pYSWdWMlZpYUc5dmF5QkVaVzF2SUVOQk1JSUJJakFOQmdrcWhraUcKOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXNvcVUzbUkvNkRFUW10VXFLVlgxOXRpbTZldEc5U2VEQzNaaAoyck1mcmx2NU1ubXZYZjJUcDdlbloyVXZPRkNRL0NUd1pxWjNMY090WlU1dzgwTXVsR1FOWTdIZFdjdHhtZjB3CmlvZC9aSVFxSjdSNTd5TEhPb2tZWlNheStiSFBmUTcvUUdTYzFNTmNyY1R2MzU0dDhwNGtlV1k3N29PWk5hVFMKMG9sR25DT0VNam16c2lyS3FZSU52cnZPT0tBL2lwSDY4SVliOGFFdVAxZGQrTmdqZnEzcXFmKzQ5bnh6QkRlcwpTcURCOVRQcEhKdWtxbWRoV3BIL2l3ajB3M1pPZWlUdDgvdWJtMXhEZFJDbzd4aEp5SHMrOFZCUE4zdGZGd1BqCm1VZC9NY0M1NURFOUJjZTB4Z1lIM3Y5YWcyOXh6d3lteGJ2RXN5M3MwWFZ6TEN1QWJ3SURBUUFCbzFNd1VUQWQKQmdOVkhRNEVGZ1FVcFVLUmF3MVdnMDBxOFYwa2hHbys1ZkZqYng4d0h3WURWUjBqQkJnd0ZvQVVwVUtSYXcxVwpnMDBxOFYwa2hHbys1ZkZqYng4d0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFRY1ZYR0F6d0pRcE9FSkVsY3FFNWwyWmY5Z2gwRm0vQWw0YXZ6THQ0L2VrTkVUb1hkOUNodVFiMjNuZ2wKcTlJT3RwWmlGb3Njc1pldVMrOTNxTGs3aWRWMElFNW5VTTdKc2VxUER1Y1F3ajE2Um9vSWdLWWlqY2pER1VlOQpvMGNnQ3lTTElWSWtlNUo1YjBrT2xNUlNyaGQxZ1UxU2J5MlJTNWI5aXVPOXpPYlVDN21lNjZLZ0psSnhhS04zCjdDMHJZN0N5eWlRS0FMQURzOEVGa3luTUZHZ2FDTmZOK0tMc2NDdk94NFJFSUk2cHQ3MXhwZ2V1eHlpZGRLc2sKYXNjQXREK01kSDBST3NhYTVPUDF0RjNtWDhkQjF6ODBpa2g3QkhZcTBNZ3prVXByNEFCc0xYNlhWVWFwRTI1NAp5alFNQmt5bEpGdDVsaTZ4UmcyRThMQzlUUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"
    rules:
      - operations: ["CREATE"]
        apiGroups: ["ops.soer3n.info"]
        apiVersions: ["v1alpha1"]
        resources: ["quarantines"]
